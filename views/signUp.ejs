<!DOCTYPE HTML>
<html>
  <head>
    <title>é¡ºé€Ÿé©¾æ ¡</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/stylesheets/comman.css" />
    <link rel="stylesheet" href="/stylesheets/signUp.css">
  </head>
  <body>
    <div class="sign-up-header">
      <img src="<%= banner %>" />
    </div>
    <section class="sign-up-content">
        <div class="type-select">
            <div class="select-title">ç­åˆ«é€‰æ‹©(<a href="/type">ç­åˆ«è¯¦æƒ…</a>)</div>
            <% for(var i=0; i<type.length; i++) {%>
                <div class="radio">
                    <input type="radio" name="type" value="<%= type[i] %>" id="type-radio-<%= i %>"/>
                    <label for="type-radio-<%= i %>"> <span></span> <%= type[i] %> </label>
                </div>
            <% } %>
        </div>
        <div class="loc-select">
            <div class="select-title">ç°è½¦åœºåœ°é€‰æ‹©(<a href="/site">åœºåœ°å±•ç¤º</a>)</div>
            <% for(var i=0; i<loc.length; i++) {%>
                <span class="radio radio-span">
                    <input type="radio" name="loc" value="<%= loc[i] %>"  id="loc-radio-<%= i %>"/>
                    <label for="loc-radio-<%= i %>"> <span></span> <%= loc[i] %> </label>
                </span>
            <% } %>
        </div>
        <div class="contact-input">
          <input id="contact" type="text" max="20" placeholder="æ‰‹æœºå·/å¾®ä¿¡"/>
        </div>
    </section>
    <footer>
      <button id="button">æŠ¥å</button>
    </footer>
    <script>
      const button = document.getElementById('button');
      button.addEventListener('click', function() {
        const obj = {};
        const contact = document.getElementById('contact');
        const type = document.getElementsByName('type');
        const loc = document.getElementsByName('loc');
        obj.contact = contact.value;
        if (!contact.value || contact.value === '') {
          alert('è¯·è¾“å…¥è”ç³»æ–¹å¼ğŸ˜Š');
        }

        for (let i=0; i<type.length; i++) {  
            if (type[i].checked) {  
                obj.type = type[i].value;  
            }  
        }
        for (let i=0; i<loc.length; i++) {  
            if (loc[i].checked) { 
                obj.location = loc[i].value;  
            }
        }
        fetch('/signup', {
          method: 'POST',
          headers: { 'Content-Type' : 'application/json' },
          body: JSON.stringify(obj),
        }).then(function() {
          alert('æŠ¥åæˆåŠŸï¼Œæ„Ÿè°¢å¯¹æˆ‘ä»¬çš„ä¿¡ä»»ï¼Œæˆ‘ä»¬å°†åœ¨ä¸€å‘¨å†…ä¸æ‚¨å–å¾—è”ç³»')
          window.location.href = '/';
        }).catch(function() {
          alert('ç³»ç»Ÿå‡ºé”™ï¼Œè¯·ç¨åå†è¯•ï¼Œæˆ–åœ¨å…¬ä¼—å·ç•™è¨€');
        })
      })
    </script>
  </body>
</html>
